// Loader
//
//

// Loader-win-bar
//
@include keyframes(loader-win-bar) {
  0% { transform: translateX(-30px); opacity: 0; }
  10% { opacity: 1; }
  40% { opacity: 1; }
  60% { transform: translateX(30px); opacity: 0; }
  100% { opacity: 0; }
};

.loader-win-bar {
  display: flex;
  justify-content: center;
  span[class*="l-"] {
    display: inline-block;
    width: $loader-dot-width;
    height: $loader-dot-height;
    background: $loader-dot-bg;
    margin: auto 2px;

    @include border-radius(100%);

    @include animation(loader-win-bar 4s infinite);
    @include animation-timing-function(cubic-bezier(0.030, 0.615, 0.995, 0.415));
    @include animation-fill-mode(both);
  }
}
$loader-win-bar-delay: (
  1: 1s,
  2: .75s,
  3: .5s,
  4: .25s,
  5: 0
);
@each $index, $value in $loader-win-bar-delay {
  .loader-win-bar {
    span.l-#{$index} {
      @include animation-delay($value);
    }
  }
}

//
// Loader-win-roll
//
@keyframes loader-win-roll {
  0% {
    transform: rotate(0deg);
    opacity: 1;
  }
  50% {
    transform: rotate(360deg);
    opacity: 1;
  }
  75% {
    transform: rotate(540deg);
    opacity: 0;
  }
  75% {
    transform: rotate(540deg);
    opacity: 0;
  }
  100% {
    transform: rotate(720deg);
    opacity: 1;
  }
}

.loader-win-roll {
  display: flex;
  position: relative;
  width: 64px;
  height: 64px;
  span[class*="l-"] {
    display: inline-block;
    position: absolute;
    width: $loader-dot-width;
    height: 100%;
    top: 0;
    left: 28px;

    &::after {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: $loader-dot-width;
      height: $loader-dot-height;
      background: $loader-dot-bg;
      z-index: 1;

      @include border-radius(100%);
    }

    //@include animation(loader-win-roll 4s infinite);
  }
}

$loader-win-roll-delay: (
        //1: 0s,
        2: .25s,
        //3: .5s,
        //4: .75s,
        //5: 1s
);
@each $index, $value in $loader-win-roll-delay {
  $deg: -90 / (5 - 1) * ($index - 1);
  @keyframes loader-win-roll {
    0% {
      transform: rotate(($deg+0)+deg);
      opacity: 1;
    }
    50% {
      transform: rotate(($deg+360)+deg);
      opacity: 1;
    }
    75% {
      transform: rotate(($deg+540)+deg);
      opacity: 0;
    }
    75% {
      transform: rotate(($deg+540)+deg);
      opacity: 0;
    }
    100% {
      transform: rotate(($deg+720)+deg);
      opacity: 1;
    }
  };

  .loader-win-roll {
    span.l-#{$index} {
      transform: rotate(($deg)+deg);
      @include animation(loader-win-roll 4s infinite);
      @include animation-delay($value);
    }
  }
}


//
// State
//
@each $name, $value in $loader-colors {
  .loader-#{$name} {
    span[class*="l-"] {
      background: $value;
    }
  }
}
